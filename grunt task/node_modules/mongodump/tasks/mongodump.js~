/*
 * restore
 * https://github.com/rohit/plugin
 *
 * Copyright (c) 2013 Bhushan Goel
 * Licensed under the MIT license.
 */



  /*// Please see the Grunt documentation for more information regarding task
  // creation: http://gruntjs.com/creating-tasks

  grunt.registerMultiTask('mongodump', 'Your task description goes here.', function() {
   // requires and initializing stuff left out for brevity
var Db = require('mongodb').Db,
	var manusis = new Db('', new Server('locahost', 27017));
	manusis.open(function(err, db) {
    	if (!err) {
        manusis.users.find(function(err, collection) {
            
	    //var collection = require('/usr/bin/users').spawn;
            var spawn = require('child_process').spawn;
            collection.insert(docs, {
                safe : true
            }, function(err, result) {


                // Execute mongodump in this callback???
                var args = ['--db', 'mydb', '--collection', 'test'], 
		mongodump = spawn('', args);
                mongodump.stdout.on('data', function(data) {
                    console.log('stdout: ' + data);
                });
                mongodump.stderr.on('data', function(data) {
                    console.log('stderr: ' + data);
                });
                mongodump.on('exit', function(code) {
                    console.log('mongodump exited with code ' + code);
                });
            });

       });
        };
    });
     
  });*/





/*'use strict';

module.exports = function(grunt) {

    grunt.registerTask('mongodump', 'dump files', function() {
        var md = 'mongodump --db manusis --collection users --out usr/bin/dmp';
    });

    //var db = new require('mongodb').getDB();
    var MongoDB = require("mongodb");	
    var db = new MongoDB.Mongo().getDB("mydb");

    //  db.open(function(err, db) {
    if (!err) {
        db.collection('users', function(err, collection) {
            var docs = [{
                'hello' : 'doc1'
            }, {
                'hello' : 'doc2'
            }, {
                'hello' : 'doc3'
            }];
            var collection = require('child_process').spawn;

            collection.insert(docs, {safe : true}, function(result) {
                var args = ['--db', 'mydb', '--collection', 'test']
                var spawn = require('md').spawn, mongodump = spawn('usr/bin/', args);

                mongodump.stdout.on('data', function(data) {
                    console.log('stdout: ' + data);
                });
                mongodump.stderr.on('data', function(data) {
                    console.log('stderr: ' + data);
                });
                mongodump.on('exit', function(code) {
                    console.log('mongodump exited with code ' + code);
                });
            });
        });
    }
    //});
}*/


'use strict';

module.exports = function(grunt) {
grunt.registerTask('mongodump', 'dump files', function() {
        console.log('Helloo');
    });
var myTerminal = require("child_process").exec,
    commandToBeExecuted = "mongodump --db cars --collection suv --out src/temp";
	console.log(commandToBeExecuted);
myTerminal(commandToBeExecuted, function(error, stdout, stderr) {
    if (!error) {
         //do something
    }
});
}
